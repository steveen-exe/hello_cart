{% load static %}

<div class="small container cart-page">
    <table>
        <thead>
            <tr>
                <th>Product</th>
                <th>Quantity</th>
                <th>Subtotal</th>
            </tr>
        </thead>
        <tbody>
            {% for item in cart_items %}
            <tr>
                <td>
                    <div class="cart-info">
                        <img src="{{ item.product.image.url }}" alt="{{ item.product.title }}">
                        <div>
                            <p>{{ item.product.title }}</p>
                            <small>Price: ${{ item.product.price }}</small>
                            <a href="{% url 'remove_from_cart' item.id %}">Remove</a>
                        </div>
                    </div>
                </td>
                <td>{{ item.quantity }}</td>
                <td>${{ item.quantity|floatformat:2|add:""|floatformat:2|add:item.product.price|floatformat:2 }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="3">Your cart is empty.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="total-price">
        <table>
            <tbody>
                <tr>
                    <td>Subtotal</td>
                    <td>${{ subtotal|floatformat:2 }}</td>
                </tr>
                <tr>
                    <td>Tax</td>
                    <td>${{ tax|floatformat:2 }}</td>
                </tr>
                <tr>
                    <td>Total</td>
                    <td>${{ total|floatformat:2 }}</td>
                </tr>
                <tr>
                    <td colspan="2" style="background-color: #ff523b; text-align: center; padding: 20px;">
                        <form method="post" action="{% url 'confirm_order' %}">
                            {% csrf_token %}
                            <button style="
                                background-color: white;
                                color: #ff523b;
                                border: 2px solid white;
                                padding: 12px 30px;
                                font-size: 16px;
                                font-weight: bold;
                                border-radius: 5px;
                                cursor: pointer;
                                transition: all 0.3s ease;"
                                onmouseover="this.style.backgroundColor='#ff523b'; this.style.color='white'"
                                onmouseout="this.style.backgroundColor='white'; this.style.color='#ff523b'">
                                Confirm
                            </button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
